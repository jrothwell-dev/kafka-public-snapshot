app {
  name = "kafka-demo"
  name = ${?APP_NAME}
  
  log-level = "INFO"
  log-level = ${?LOG_LEVEL}
}

database {
  host = "localhost"
  host = ${?POSTGRES_HOST}
  
  port = 5432
  port = ${?POSTGRES_PORT}
  
  name = "demodata"
  name = ${?POSTGRES_DB}
  
  user = "demo"
  user = ${?POSTGRES_USER}
  
  password = "demo123"
  password = ${?POSTGRES_PASSWORD}
  
  url = "jdbc:postgresql://"${database.host}":"${database.port}"/"${database.name}
  
  driver = "org.postgresql.Driver"
  
  connection-pool {
    max-pool-size = 10
    min-idle = 2
  }
}

kafka {
  bootstrap-servers = "localhost:9092"
  bootstrap-servers = ${?KAFKA_BOOTSTRAP_SERVERS}
  
  topics {
    user-events = "user-events"
    user-events = ${?KAFKA_TOPIC_USER_EVENTS}
    
    database-changes = "database-changes"
    database-changes = ${?KAFKA_TOPIC_DATABASE_CHANGES}
    
    compliance-issues = "compliance-issues"
    
    notification-requests = "notification-requests"
    notification-events = "notification-events"
  }
  
  producer {
    acks = "all"
    retries = 3
    batch-size = 16384
    linger-ms = 1
  }
  
  consumer {
    group-id = "notification-service"
    auto-offset-reset = "earliest"
    enable-auto-commit = false
    max-poll-records = 10
  }
}

redis {
  host = "localhost"
  host = ${?REDIS_HOST}
  
  port = 6379
  port = ${?REDIS_PORT}
  
  database = 0
  
  cache {
    default-ttl = 3600
    api-response-ttl = 300
  }
}

smtp {
  host = "smtp.murrumbidgee.nsw.gov.au"
  host = ${?SMTP_HOST}
  
  port = 25
  port = ${?SMTP_PORT}
  
  from = "notifications@murrumbidgee.nsw.gov.au"
  from = ${?SMTP_FROM}
  
  auth = false
  starttls = false
}

api-poller {
  poll-interval = 60
  timeout = 30
}

notification-service {
  enabled = true
  poll-interval = 100
  max-retries = 3
  retry-delay = 5000
  
  rate-limit {
    enabled = true
    max-per-minute = 60
  }
}

safetyculture {
  api-url = "https://api.safetyculture.io"
  api-url = ${?SAFETYCULTURE_API_URL}
  
  api-token = ""
  api-token = ${?SAFETYCULTURE_API_TOKEN}
  
  poll-interval = 300 
  page-size = 100
}